(()=>{console.log("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");const e=document.querySelector("#chat-input"),t=document.querySelector("#send-btn"),n=document.querySelector(".chat-container"),o=document.querySelector("#theme-btn"),s=document.querySelector("#delete-btn");let l=null;const i=e.scrollHeight,c=()=>{const e=localStorage.getItem("theme-color");document.body.classList.toggle("light-mode","light_mode"===e),o.innerText=document.body.classList.contains("light-mode")?"dark_mode":"light_mode",n.innerHTML=localStorage.getItem("all-chats")||'<div class="default-text">\n                            <h1>ChatGPT Clone</h1>\n                            <p>Start a conversation and explore the power of AI. <br> Your chat history wil be displayed here.</p>\n                        </div>',n.scrollTo(0,n.scrollHeight)},a=(e,t)=>{const n=document.createElement("div");return n.classList.add("chat",t),n.innerHTML=e,n},r=()=>{const e=a('<div class="chat-content">\n                        <div class="chat-details">\n                         <img src="./images/chatbot.jpg" alt="bot-image">\n                            <div class="typing-animation">\n                            <div class="typing-dot" style="--delay: 0.2s"></div>\n                            <div class="typing-dot" style="--delay: 0.3s"></div>\n                            <div class="typing-dot" style="--delay: 0.4s"></div>\n                            </div>\n                        </div>\n                        <span onclick="copyResponse(this)" class="material-symbols-rounded">content_copy</span>\n                    </div>',"incoming");n.appendChild(e),n.scrollTo(0,n.scrollHeight),(async e=>{const t=document.createElement("p"),o={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${API_KEY}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:l}],max_tokens:2048,temperature:.2,n:1,stop:null})};try{const e=await(await fetch("https://api.openai.com/v1/chat/completions",o)).json();t.textContent=e.choices[0].message.content.trim()}catch(e){t.classList.add("error"),t.textContent="Oops! Something went wrong while retrieving the response. Please try again."}e.querySelector(".typing-animation").remove(),e.querySelector(".chat-details").appendChild(t),localStorage.setItem("all-chats",n.innerHTML),n.scrollTo(0,n.scrollHeight)})(e)},d=()=>{if(l=e.value.trim(),!l)return;e.value="",e.style.height=`${i}px`;const t=a(` <div class="chat-content">\n                    <div class="chat-details">\n                        <img src="./images/3.png" alt="user-image">\n                        <p>${l}</p>\n                    </div>\n                </div>`,"outgoing");t.querySelector("p").textContent=l,document.querySelector(".default-text")?.remove(),n.appendChild(t),n.scrollTo(0,n.scrollHeight),setTimeout(r,500)};s.addEventListener("click",(()=>{confirm("Are you sure you want to delete the chats?")&&(localStorage.removeItem("all-chats"),c())})),o.addEventListener("click",(()=>{document.body.classList.toggle("light-mode"),localStorage.setItem("theme-color",o.innerText),o.innerText=document.body.classList.contains("light-mode")?"dark_mode":"light_mode"})),e.scrollHeight,e.addEventListener("input",(()=>{e.style.height=`${i}px`,e.style.height=`${e.scrollHeight}px`})),e.addEventListener("keydown",(e=>{"Enter"===e.key&&!e.shiftKey&&window.innerWidth>800&&(e.preventDefault(),d())})),c(),t.addEventListener("click",d)})();